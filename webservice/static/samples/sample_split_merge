[campaign]
experiment=sample
tag=sample_split_merge
campaign_stage_list=sample_split sample_merge_triga sample_merge_trigb sample_merge_trigc sample_merge_trigd sample_merge_trige sample_merge_trigf


[campaign_stage sample_split]
dataset=draining_production_raw_v1_0
software_version=v1_0
vo_role=Production
cs_split_type=nfiles(10000)
job_type=generic_fife_process
launch_template=generic_fife_launch
param_overrides=[["--stage=","split"]]
completion_type=complete
completion_pct=95

[campaign_stage sample_merge_triga]
dataset=from_parent
software_version=v1_0
vo_role=Production
cs_split_type=none
job_type=generic_fife_process
launch_template=generic_fife_launch
param_overrides=[["--stage=","merge"]]
completion_type=complete
completion_pct=95

[dependencies sample_merge_triga]
campaign_stage_1=sample_split
file_pattern_1=%%triga%%


[campaign_stage sample_merge_trigb]
dataset=from_parent
software_version=v1_0
vo_role=Production
cs_split_type=none
job_type=generic_fife_process
launch_template=generic_fife_launch
param_overrides=[["--stage=","merge"],["-Oglobal.sam_dataset=","%(dataset)s"]]
completion_type=complete
completion_pct=95

[dependencies sample_merge_trigb]
campaign_stage_1=sample_split
file_pattern_1=%%trigb%%


[campaign_stage sample_merge_trigc]
dataset=from_parent
software_version=v1_0
vo_role=Production
cs_split_type=none
job_type=generic_fife_process
launch_template=generic_fife_launch
param_overrides=[["--stage=","merge"],["-Oglobal.sam_dataset=","%(dataset)s"]]
completion_type=complete
completion_pct=95

[dependencies sample_merge_trigc]
campaign_stage_1=sample_split
file_pattern_1=%%trigc%%


[campaign_stage sample_merge_trigd]
dataset=from_parent
software_version=v1_0
vo_role=Production
cs_split_type=none
job_type=generic_fife_process
launch_template=generic_fife_launch
param_overrides=[["--stage=","merge"],["-Oglobal.sam_dataset=","%(dataset)s"]]
completion_type=complete
completion_pct=95

[dependencies sample_merge_trigd]
campaign_stage_1=sample_split
file_pattern_1=%%trigd%%


[campaign_stage sample_merge_trige]
dataset=from_parent
software_version=v1_0
vo_role=Production
cs_split_type=none
job_type=generic_fife_process
launch_template=generic_fife_launch
param_overrides=[["--stage=","merge"],["-Oglobal.sam_dataset=","%(dataset)s"]]
completion_type=complete
completion_pct=95

[dependencies sample_merge_trige]
campaign_stage_1=sample_split
file_pattern_1=%%trige%%


[campaign_stage sample_merge_trigf]
dataset=from_parent
software_version=v1_0
vo_role=Production
cs_split_type=none
job_type=generic_fife_process
launch_template=generic_fife_launch
param_overrides=[["--stage=","merge"],["-Oglobal.sam_dataset=","%(dataset)s"]]
completion_type=complete
completion_pct=95

[dependencies sample_merge_trigf]
campaign_stage_1=sample_split
file_pattern_1=%%trigf%%

[launch_template generic_fife_launch]
host=%(experiment)sgpvm01.fnal.gov
account=%(experiment)spro
setup=export X509_USER_PROXY=/opt/%(experiment)spro/%(experiment)spro.Production.proxy; setup fife_utils, poms_client, poms_jobsub_wrapper

[job_type generic_fife_process]
launch_script=fife_launch -c $FIFE_UTILS_DIR/cfg/generic.cfg
output_file_patterns=%%.root
parameters=[]
